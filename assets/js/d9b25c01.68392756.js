"use strict";(self.webpackChunkfreewili_docs=self.webpackChunkfreewili_docs||[]).push([[9791],{4033:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>C,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=i(4848),s=i(8453),a=i(9980);const r={title:"FREE-WILi Real Time Clock (RTC): Functions, API, and MCP7940N Details",description:"Explore FREE-WILi's Real Time Clock (RTC) powered by the MCP7940N IC, used for file timestamping and accessible via API. Learn about RTC settings, events, and hardware details.",keywords:["FREE-WILi RTC","MCP7940N","real time clock","RTC API","file timestamping","RTC settings","RTC events","Lithium ION battery","RTC trim setting","setRTC","getRTC"],sidebar_position:10,sidebar_label:"RTC Real Time Clock"},l="RTC Real Time Clock",o={id:"gui-screen-buttons-and-lights/rtc-real-time-clock",title:"FREE-WILi Real Time Clock (RTC): Functions, API, and MCP7940N Details",description:"Explore FREE-WILi's Real Time Clock (RTC) powered by the MCP7940N IC, used for file timestamping and accessible via API. Learn about RTC settings, events, and hardware details.",source:"@site/docs/gui-screen-buttons-and-lights/rtc-real-time-clock.md",sourceDirName:"gui-screen-buttons-and-lights",slug:"/gui-screen-buttons-and-lights/rtc-real-time-clock",permalink:"/gui-screen-buttons-and-lights/rtc-real-time-clock",draft:!1,unlisted:!1,editUrl:"https://github.com/freewili/FreeWili_WebDocs/blob/main/docs/gui-screen-buttons-and-lights/rtc-real-time-clock.md",tags:[],version:"current",lastUpdatedAt:172535856e4,sidebarPosition:10,frontMatter:{title:"FREE-WILi Real Time Clock (RTC): Functions, API, and MCP7940N Details",description:"Explore FREE-WILi's Real Time Clock (RTC) powered by the MCP7940N IC, used for file timestamping and accessible via API. Learn about RTC settings, events, and hardware details.",keywords:["FREE-WILi RTC","MCP7940N","real time clock","RTC API","file timestamping","RTC settings","RTC events","Lithium ION battery","RTC trim setting","setRTC","getRTC"],sidebar_position:10,sidebar_label:"RTC Real Time Clock"},sidebar:"tutorialSidebar",previous:{title:"GUI API Basics",permalink:"/gui-screen-buttons-and-lights/gui-api-basics"},next:{title:"Li-ION Battery and Power Management",permalink:"/gui-screen-buttons-and-lights/li-ion-battery-and-power-management"}},c={},d=[{value:"App",id:"app",level:2},{value:"Settings",id:"settings",level:2},{value:"API",id:"api",level:2},{value:"Hardware Details",id:"hardware-details",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"rtc-real-time-clock",children:"RTC Real Time Clock"})}),"\n",(0,n.jsx)(t.p,{children:"FREE-WILi includes a real time clock powered by the MCP7940N IC. The real time clock is used by the file system to timestamp files. The RTC also can be accessed by wasm for custom scripts such as logging files or doing tasks on alarms."}),"\n",(0,n.jsx)(t.p,{children:"The RTC time is shown on the main screen. Also from the about app there is a RTC view."}),"\n",(0,n.jsx)(t.h2,{id:"app",children:"App"}),"\n",(0,n.jsx)(t.p,{children:"The about app will display the current RTC. The current time is shown as well as the time FREE-WILi started."}),"\n",(0,n.jsx)("div",{class:"text--center",children:(0,n.jsx)("figure",{children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{alt:"about-app",src:i(9282).A+"",title:"about-app",width:"1470",height:"1062"}),"\r\n",(0,n.jsx)("figcaption",{children:"About App Screen"})]})})}),"\n",(0,n.jsx)(t.h2,{id:"settings",children:"Settings"}),"\n",(0,n.jsx)(t.p,{children:"The RTC is currently set from the main USB serial interface (this will be supported in both CPUs in the future)."}),"\n",(0,n.jsx)(t.p,{children:"The settings include a trim setting. This setting is loaded into the MCP7940N Trim (OSCTRIM) register. Please see the data sheet below for an explanation of this value."}),"\n",(0,n.jsx)("div",{class:"text--center",children:(0,n.jsx)("figure",{children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{alt:"The settings allow you to set the RTC values.",src:i(7158).A+"",title:"The settings allow you to set the RTC values.",width:"280",height:"225"}),"\r\n",(0,n.jsx)("figcaption",{children:"The settings allow you to set the RTC values."})]})})}),"\n",(0,n.jsx)(t.h2,{id:"api",children:"API"}),"\n",(0,n.jsx)(t.p,{children:"The API supports querying and setting the RTC. The setRTC allows you to set the current time. The getRTC causes the RTC to be read and provided via an event."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:'// set the RTC IC (Monday is 1 and 7 is Sunday (0 is invalid))\r\nvoid setRTC(int iRTCHour, int iRTCMin, int iRTCSec, int iRTCWkDay, int iDay, int iRTCMth, int iRTCYear, int iTrim);\r\n// request the current RTC via an event\r\nvoid getRTC();\r\n\r\n\r\n// RTC Event Response\r\nif (stEvents[iCount].iEvent == FWGUI_EVENT_GUI_RTC_RESPONSE)\r\n{\r\n//iRTCHour, int iRTCMin, int iRTCSec, int iRTCWkDay,int iRTCDay, int iRTCMth,int iRTCYear\r\nprintf("%d:%d:%d day %d of month %d of year %d weekday %d trim %d", stEvents[iCount].btData[0],\r\n                            stEvents[iCount].btData[1],\r\n                            stEvents[iCount].btData[2],\r\n                            stEvents[iCount].btData[4],\r\n                            stEvents[iCount].btData[5],\r\n                            stEvents[iCount].btData[6],\r\n                            stEvents[iCount].btData[3],\r\n                            stEvents[iCount].btData[7]\r\n                            );\r\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"hardware-details",children:"Hardware Details"}),"\n",(0,n.jsx)(t.p,{children:"The MCP7940N  IC is used to implement the RTC. The data sheet is below. The RTC is always powered  from the Lithium ION battery. When FREE-WILi shuts down the battery will continue to supply power (about 1 micro amp) to the RTC until the battery is physically exhausted. At that point the RTC value will be lost."}),"\n","\n",(0,n.jsx)(a.A,{title:"MCP7940N",description:"",link:"https://www.microchip.com/en-us/product/mcp7940n",imageUrl:"/img/microchip.png"})]})}function C(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},9980:(e,t,i)=>{i.d(t,{A:()=>o});i(6540);const n="card_t5fD",s="cardContent_yn8N",a="cardHeader_jh50",r="cardImage_zPy4";var l=i(4848);const o=e=>{let{title:t,description:i,link:o,imageUrl:c}=e;return(0,l.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:n,children:(0,l.jsxs)("div",{className:s,children:[(0,l.jsxs)("div",{className:a,children:[c&&(0,l.jsx)("img",{src:c,alt:t,className:r}),(0,l.jsx)("h3",{children:t})]}),(0,l.jsx)("p",{children:i})]})})}},9282:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/about-app-dcbdd1abd2ddaab5ff7a21dae66b1b85.jpg"},7158:(e,t,i)=>{i.d(t,{A:()=>n});const n="data:image/png;base64,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"},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>l});var n=i(6540);const s={},a=n.createContext(s);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);